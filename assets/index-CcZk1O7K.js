import{r as n,m as se,ao as re,ap as le,O as ne,j as e,S as Y,l as oe,x as ce,q as J,c as ie,aq as de,ar as me,as as ue,at as xe,au as he,av as pe,R as be}from"./vendor_react-DXiryTHP.js";import{C as _,P as ge}from"./personalizedpath-CMywhJ14.js";import{E,F as G,u as D,g as fe,G as je,H as ye,I as ke,J as ve,K as we,p as Se,q as Ne,L as Ce,M as Te,N as U,O as Re}from"./chapterview-B02STcsL.js";import{H as De,T as Pe}from"./header-GdFY8El7.js";import{G as Fe}from"./gradeselector-BWm9AwI1.js";import{S as z}from"./subjectselector-j53QeLbX.js";import{R as O}from"./roleselector-D98uhUvF.js";import{T as $e}from"./teacherdashboard-CQif500z.js";import{P as Le}from"./parentdashboard-BLz8JUdr.js";import $ from"./loadingspinner-DNzNT9Ti.js";import Be from"./quiz-DnL6uxM-.js";import{S as W}from"./studentdashboard-Bg_WTAl7.js";import{L as Ae}from"./loginscreen-CT9WvuHn.js";import{F as Ie}from"./faqscreen-DFIaTs5X.js";import{u as _e,A as Me}from"./conceptcard-CDDsxe1s.js";import"./vendor-D07iqKQo.js";import"./missionquiz-DEU4Le05.js";import"./videosimulationplayer-iOOravJX.js";import"./logo-8p1leXe8.js";import"./iconmap-iBemgT8I.js";import"./fittoavatar-BE-ozDqT.js";import"./practiceexercises-LXlW4Hw3.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function m(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(a){if(a.ep)return;a.ep=!0;const c=m(a);fetch(a.href,c)}})();const q="curriculum_data",V="curriculum_version",Q="1.0",Ee=async()=>{try{if(await E("cache",V)===Q){const t=await E("cache",q);if(t)return console.log("Loading curriculum from cache."),t}return console.log("Loading curriculum from static source and caching."),await G("cache",q,_),await G("cache",V,Q),_}catch(r){return console.error("Error managing curriculum cache, falling back to static version:",r),_}},H=[{id:1,name:"Ananya Sharma",grade:"Grade 10",avatarUrl:"https://i.pravatar.cc/150?u=ananya",performance:[{subject:"Mathematics",chapter:"Real Numbers",score:92,completedDate:"2024-05-20"},{subject:"Mathematics",chapter:"Polynomials",score:85,completedDate:"2024-05-22"},{subject:"Physics",chapter:"Electricity",score:68,completedDate:"2024-05-21"},{subject:"Physics",chapter:"Magnetic Effects of Electric Current",score:75,completedDate:"2024-05-24"},{subject:"Biology",chapter:"Life Processes",score:95,completedDate:"2024-05-19"}]},{id:2,name:"Rohan Verma",grade:"Grade 8",avatarUrl:"https://i.pravatar.cc/150?u=rohan",performance:[{subject:"Chemistry",chapter:"Metals and Non-metals",score:78,completedDate:"2024-05-23"},{subject:"History",chapter:"From Trade to Territory",score:65,completedDate:"2024-05-22"},{subject:"Mathematics",chapter:"Linear Equations in One Variable",score:95,completedDate:"2024-05-25"}]},{id:3,name:"Priya Singh",grade:"Grade 10",avatarUrl:"https://i.pravatar.cc/150?u=priya",performance:[{subject:"Geography",chapter:"Resources and Development",score:88,completedDate:"2024-05-20"},{subject:"Chemistry",chapter:"Carbon and its Compounds",score:62,completedDate:"2024-05-24"}]}],Ge=({performanceRecords:r})=>{const{t,tCurriculum:m}=D(),l=a=>a>85?"text-green-600 dark:text-green-300 bg-green-100 dark:bg-green-900/50 border-green-200 dark:border-green-800":a>70?"text-yellow-600 dark:text-yellow-300 bg-yellow-100 dark:bg-yellow-900/50 border-yellow-200 dark:border-yellow-800":"text-red-600 dark:text-red-300 bg-red-100 dark:bg-red-900/50 border-red-200 dark:border-red-800";return e.jsx("div",{className:"space-y-3 max-h-[600px] overflow-y-auto pr-2",children:r.length>0?r.map((a,c)=>e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-3 rounded-lg flex justify-between items-center border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-100",children:m(a.chapter)}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[m(a.subject)," -",e.jsx("span",{className:"font-medium ml-1",children:a.type==="exercise"?t("practiceOn",{context:m(a.context||"")}):t("quizType")})]})]}),e.jsxs("div",{className:`px-3 py-1 text-sm font-bold rounded-full border ${l(a.score)}`,children:[a.score,"%"]})]},c)):e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-8",children:t("noPerformanceData")})})},Ue=({activityData:r,maxActivity:t})=>{const{t:m}=D(),l=new Date,a=[];for(let i=34;i>=0;i--){const o=new Date(l);o.setDate(l.getDate()-i),a.push(o)}const c=a[0].getDay(),s=i=>{if(i===0)return"bg-slate-200 dark:bg-slate-700/50";const o=Math.min(1,i/(t||1)),u=document.documentElement,d=getComputedStyle(u).getPropertyValue("--c-primary").split(" ").join(",");return o<.25?`rgba(${d}, 0.2)`:o<.5?`rgba(${d}, 0.4)`:o<.75?`rgba(${d}, 0.7)`:`rgba(${d}, 1)`},y=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg",children:[e.jsx("div",{className:"grid grid-cols-7 gap-1.5",style:{gridTemplateRows:"auto"},children:y.map(i=>e.jsx("div",{className:"text-xs font-bold text-center text-slate-500 dark:text-slate-400",children:i},i))}),e.jsxs("div",{className:"grid grid-cols-7 gap-1.5 mt-2",children:[Array.from({length:c}).map((i,o)=>e.jsx("div",{},`empty-${o}`)),a.map(i=>{const o=i.toDateString(),u=r[o]||0;return e.jsx("div",{className:"w-full aspect-square rounded-sm",style:{backgroundColor:s(u)},title:`${i.toLocaleDateString()}: ${u} activities`},o)})]}),e.jsxs("div",{className:"flex justify-end items-center text-xs mt-2 text-slate-500 dark:text-slate-400 gap-2",children:[m("lessActivity"),e.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:s(0)}}),e.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:s(Math.ceil(t*.4))}}),e.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:s(Math.ceil(t*.7))}}),e.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:s(t||1)}}),m("moreActivity")]})]})},ze=({performanceRecords:r})=>{const{t,tCurriculum:m}=D(),l=n.useMemo(()=>{const a={};r.forEach(o=>{const u=new Date(o.completedDate).toDateString();a[u]=(a[u]||0)+1});const c=Math.max(...Object.values(a),0),s={};r.forEach(o=>{(o.type==="quiz"||o.type==="exercise")&&(s[o.subject]||(s[o.subject]={totalScore:0,count:0}),s[o.subject].totalScore+=o.score,s[o.subject].count+=1)});const y=Object.entries(s).map(([o,u])=>({subject:o,averageScore:Math.round(u.totalScore/u.count)})).sort((o,u)=>u.averageScore-o.averageScore),i=r.reduce((o,u)=>(u.type==="quiz"&&(o.quizzes+=1),u.type==="exercise"&&(o.exercises+=1),o),{quizzes:0,exercises:0});return{activityByDate:a,maxActivity:c,subjectPerformance:y,learningStyle:i}},[r]);return r.length?e.jsxs("div",{className:"space-y-8 max-h-[600px] overflow-y-auto pr-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-200 mb-3",children:t("weeklyActivity")}),e.jsx(Ue,{activityData:l.activityByDate,maxActivity:l.maxActivity})]}),l.subjectPerformance.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-200 mb-3",children:t("performanceBySubject")}),e.jsx("div",{className:"space-y-3",children:l.subjectPerformance.map(({subject:a,averageScore:c})=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-slate-600 dark:text-slate-300",children:m(a)}),e.jsxs("span",{className:"text-sm font-bold text-primary",style:{color:"rgb(var(--c-primary))"},children:[c,"%"]})]}),e.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3.5",children:e.jsx("div",{className:"h-3.5 rounded-full progress-bar-gradient",style:{width:`${c}%`}})})]},a))})]}),(l.learningStyle.quizzes>0||l.learningStyle.exercises>0)&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-200 mb-3",children:t("learningStyle")}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-900/50 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("p",{className:"text-3xl font-bold text-primary-dark",style:{color:"rgb(var(--c-primary-dark))"},children:l.learningStyle.quizzes}),e.jsx("p",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400",children:t("quizzesTaken")})]}),e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-900/50 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("p",{className:"text-3xl font-bold text-primary-dark",style:{color:"rgb(var(--c-primary-dark))"},children:l.learningStyle.exercises}),e.jsx("p",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400",children:t("practiceSessions")})]})]})]})]}):e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-8",children:t("noPerformanceData")})},Oe=({questions:r,student:t,onSetError:m})=>{const{t:l,tCurriculum:a,language:c}=D(),[s,y]=n.useState({}),[i,o]=n.useState(null),u=async d=>{o(d.id),m(null);try{const k=await Te(d,c);y(h=>({...h,[d.id]:k}))}catch(k){m(k.message)}finally{o(null)}};return e.jsx("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2",children:r.length>0?r.map(d=>{var k,h;return e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(d.timestamp).toLocaleString()}),e.jsxs("p",{className:"font-semibold my-1 text-slate-800 dark:text-slate-100",children:['"',d.questionText,'"']}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:[l("context"),": ",a(d.chapter)," > ",e.jsx("span",{className:"font-medium",children:a(d.concept)})]}),d.fittoResponse&&e.jsxs("div",{className:"mt-4 bg-slate-200 dark:bg-slate-700 p-3 rounded-lg",children:[e.jsxs("h5",{className:"font-bold text-sm text-slate-600 dark:text-slate-200 flex items-center",children:[e.jsx(J,{className:"h-4 w-4 mr-1.5 text-primary",style:{color:"rgb(var(--c-primary))"}}),l("fittoResponseTitle")]}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 mt-1",children:d.fittoResponse.responseText})]}),s[d.id]?e.jsxs("div",{className:"mt-4 space-y-3 animate-fade-in",children:[e.jsxs("div",{className:"bg-primary-light/60 dark:bg-slate-900/50 p-3 rounded",children:[e.jsx("h5",{className:"font-bold text-sm text-primary-dark",style:{color:"rgb(var(--c-primary-dark))"},children:l("modelAnswer")}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:(k=s[d.id])==null?void 0:k.modelAnswer})]}),e.jsxs("div",{className:"bg-primary-light/60 dark:bg-slate-900/50 p-3 rounded",children:[e.jsx("h5",{className:"font-bold text-sm text-primary-dark",style:{color:"rgb(var(--c-primary-dark))"},children:l("pedagogicalNotes")}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:(h=s[d.id])==null?void 0:h.pedagogicalNotes})]})]}):e.jsx("div",{className:"mt-3 text-right",children:e.jsx("button",{onClick:()=>u(d),disabled:i===d.id,className:"px-3 py-1.5 text-xs font-semibold bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-200 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-600 transition shadow-sm disabled:opacity-50 flex items-center",children:i===d.id?e.jsxs(e.Fragment,{children:[e.jsx($,{})," ",e.jsxs("span",{className:"ml-2",children:[l("analyzing"),"..."]})]}):l("getAIAnswerSuggestion")})})]},d.id)}):e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-8",children:l("noQuestionsSubmitted")})})},We=({student:r,userRole:t,performanceRecords:m,onSetError:l})=>{const{t:a,language:c}=D(),[s,y]=n.useState(null),[i,o]=n.useState(!1),[u,d]=n.useState(!1),[k,h]=n.useState(null),[v,w]=n.useState(!1),[S,N]=n.useState(null),[j,f]=n.useState(""),[F,P]=n.useState(!1),p=b=>b.split(`
`).map((g,C)=>{if(g.match(/^\s*\d*\.?\s*\*\*(.+?):\*\*/)){const B=g.replace(/^\s*\d*\.?\s*\*\*(.+?):\*\*/,"$1");return e.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-100 mt-4 mb-2",children:B},C)}return g.match(/^\s*[-*]\s/)?e.jsx("li",{className:"ml-5 list-disc text-slate-600 dark:text-slate-300 mb-1",children:g.replace(/^\s*[-*]\s/,"")},C):g.trim()?e.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-2",children:g},C):null}),R=async()=>{o(!0),y(null),l(null),d(!1),N(null),f(""),P(!1);try{const b={...r,performance:m},g=await ye(r.id,t,c);if(g){y(g),d(!0);return}const C=t==="teacher"?await ke(b,c):await ve(b,c);y(C),await we(r.id,t,C,c)}catch(b){l(b.message)}finally{o(!1)}},L=async()=>{if(!S)return;const b=`report-${t}-${r.id}-${c}`,g={id:`feedback-${Date.now()}`,userRole:t,studentId:r.id,contentIdentifier:b,rating:S,comment:j,timestamp:new Date().toISOString()};try{await Ce(g),P(!0)}catch{l("Failed to save feedback. Please try again.")}},A=async()=>{w(!0),h(null),l(null);try{if(m.length===0){l(a("noPerformanceDataError"));return}const b=[...m].sort((B,I)=>B.score-I.score)[0],g=await Se(r.grade,b.subject,b.chapter,r.name,c),C=await Ne(g.keyConcepts,c);h(C)}catch(b){l(b.message)}finally{w(!1)}};return k?e.jsx(Be,{questions:k,onBack:()=>h(null),chapterTitle:a("practiceSheet")}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:R,disabled:i,className:"w-full flex items-center justify-center px-4 py-3 text-white font-bold rounded-lg btn-primary-gradient disabled:opacity-70 disabled:cursor-not-allowed",children:i?e.jsxs(e.Fragment,{children:[e.jsx($,{})," ",e.jsx("span",{className:"ml-2",children:a("generatingReport")})]}):e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"h-5 w-5 mr-2"}),a("generateAnalysisReport")]})}),t==="teacher"&&e.jsx("button",{onClick:A,disabled:v,className:"w-full flex items-center justify-center px-4 py-3 bg-teal-600 text-white font-bold rounded-lg shadow-md hover:bg-teal-700 transition disabled:bg-teal-400 disabled:cursor-not-allowed",children:v?e.jsxs(e.Fragment,{children:[e.jsx($,{})," ",e.jsx("span",{className:"ml-2",children:a("assigningSheet")})]}):e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"h-5 w-5 mr-2"}),a("assignPracticeSheet")]})}),s&&e.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg animate-fade-in max-h-[450px] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("h4",{className:"font-bold text-slate-800 dark:text-slate-100 text-lg flex items-center",children:[e.jsx(J,{className:"h-5 w-5 mr-2 text-primary",style:{color:"rgb(var(--c-primary))"}}),a("aiGeneratedReport")]}),u&&e.jsxs("div",{className:"flex items-center bg-teal-100 dark:bg-teal-900/50 text-teal-800 dark:text-teal-300 text-xs font-medium px-2 py-0.5 rounded-full",children:[e.jsx(ie,{className:"h-3 w-3 mr-1"}),a("loadedFromDB")]})]}),e.jsx("div",{className:"prose prose-sm max-w-none dark:prose-invert prose-headings:text-slate-800 dark:prose-headings:text-slate-100 prose-p:text-slate-600 dark:prose-p:text-slate-300 prose-li:text-slate-600 dark:prose-li:text-slate-300",children:p(s)})]}),s&&!i&&e.jsx("div",{className:"mt-6 pt-4 border-t border-dashed border-slate-200 dark:border-slate-700",children:F?e.jsx("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/30 rounded-lg text-green-700 dark:text-green-300 font-semibold animate-fade-in",children:a("feedbackThanks")}):e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("h5",{className:"font-bold text-slate-700 dark:text-slate-200",children:a("feedbackOnReport")}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-3",children:a("helpUsImprove")}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>N("up"),className:`p-2 rounded-full transition ${S==="up"?"bg-green-100 dark:bg-green-900/50 text-green-600 dark:text-green-300":"bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600"}`,children:S==="up"?e.jsx(de,{className:"h-6 w-6"}):e.jsx(me,{className:"h-6 w-6"})}),e.jsx("button",{onClick:()=>N("down"),className:`p-2 rounded-full transition ${S==="down"?"bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-300":"bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600"}`,children:S==="down"?e.jsx(ue,{className:"h-6 w-6"}):e.jsx(xe,{className:"h-6 w-6"})}),e.jsx("textarea",{value:j,onChange:b=>f(b.target.value),placeholder:a("commentOptional"),className:"flex-grow p-2 text-sm border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900/50 rounded-md focus:ring-1 focus:ring-primary",rows:1})]}),S&&e.jsx("div",{className:"text-right mt-3",children:e.jsx("button",{onClick:L,className:"px-4 py-1.5 text-sm bg-primary text-white font-semibold rounded-lg shadow-sm hover:bg-primary-dark transition",style:{backgroundColor:"rgb(var(--c-primary))"},children:a("submitFeedback")})})]})})]})},K=({userRole:r,student:t,language:m,onBack:l})=>{const[a,c]=n.useState("performance"),{t:s,tCurriculum:y}=D(),[i,o]=n.useState(t.performance),[u,d]=n.useState([]),[k,h]=n.useState(!0),[v,w]=n.useState(null);n.useEffect(()=>{(async()=>{h(!0),w(null);try{const f=await fe(t.id),F=[...t.performance,...f],P=Array.from(new Map(F.map(p=>[`${p.subject}-${p.chapter}-${p.completedDate}-${p.score}-${p.type}-${p.context}`,p])).values());if(P.sort((p,R)=>new Date(R.completedDate).getTime()-new Date(p.completedDate).getTime()),o(P),r==="teacher"){const p=await je(t.id,m);d(p.sort((R,L)=>new Date(L.timestamp).getTime()-new Date(R.timestamp).getTime()))}}catch(f){w(f.message||"Failed to load student data.")}finally{h(!1)}})()},[t.id,t.performance,m,r]);const S=[{id:"performance",name:s("performance"),icon:se},{id:"studyPatterns",name:s("studyPatterns"),icon:re},...r==="teacher"?[{id:"questions",name:s("studentQuestions"),icon:le}]:[],{id:"reports",name:s("aiReports"),icon:ne}],N=()=>{if(k)return e.jsx("div",{className:"flex justify-center py-8",children:e.jsx($,{})});switch(a){case"performance":return e.jsx(Ge,{performanceRecords:i});case"studyPatterns":return e.jsx(ze,{performanceRecords:i});case"questions":return r==="teacher"?e.jsx(Oe,{questions:u,student:t,onSetError:w}):null;case"reports":return e.jsx(We,{student:t,userRole:r,performanceRecords:i,onSetError:w})}};return e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("button",{onClick:l,className:"flex items-center text-primary hover:text-primary-dark font-semibold transition mb-6",style:{color:"rgb(var(--c-primary))"},children:[e.jsx(Y,{className:"h-5 w-5 mr-2"}),s("backToDashboard")]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center border-b border-slate-200 dark:border-slate-700 pb-4 mb-6",children:[e.jsx("img",{src:t.avatarUrl,alt:t.name,className:"h-16 w-16 rounded-full mr-5"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100",children:t.name}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:y(t.grade)})]})]}),e.jsx("div",{className:"mb-6 border-b border-slate-200 dark:border-slate-700",children:e.jsx("nav",{className:"-mb-px flex space-x-6 overflow-x-auto","aria-label":"Tabs",children:S.map(j=>e.jsxs("button",{onClick:()=>c(j.id),className:`group inline-flex items-center py-4 px-1 border-b-2 font-semibold text-sm transition-colors whitespace-nowrap
                            ${a===j.id?"border-primary text-primary":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 hover:border-slate-300 dark:hover:border-slate-600"}`,style:{borderColor:a===j.id?"rgb(var(--c-primary))":"transparent",color:a===j.id?"rgb(var(--c-primary))":""},children:[e.jsx(j.icon,{className:"-ml-0.5 mr-2 h-5 w-5"}),e.jsx("span",{children:j.name})]},j.id))})}),e.jsxs("div",{className:"animate-fade-in",children:[v&&e.jsx("p",{className:"text-red-500 dark:text-red-400 mb-4 text-center",children:v}),N()]})]})]})},qe=({onBack:r})=>{const{t}=D(),m=[{title:t("whatInfoWeCollectTitle"),content:t("whatInfoWeCollectContent")},{title:t("howWeUseInfoTitle"),content:t("howWeUseInfoContent")},{title:t("infoSafetyTitle"),content:t("infoSafetyContent")},{title:t("yourChoicesTitle"),content:t("yourChoicesContent")},{title:t("changesToPolicyTitle"),content:t("changesToPolicyContent")},{title:t("contactUsTitle"),content:t("contactUsContent")}];return e.jsxs("div",{className:"animate-fade-in max-w-4xl mx-auto",children:[e.jsxs("button",{onClick:r,className:"flex items-center text-primary hover:text-primary-dark font-semibold transition mb-6",style:{color:"rgb(var(--c-primary))"},children:[e.jsx(Y,{className:"h-5 w-5 mr-2"}),t("backToHome")]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[e.jsxs("header",{className:"text-center border-b border-slate-200 dark:border-slate-700 pb-6 mb-6",children:[e.jsx(he,{className:"h-12 w-12 mx-auto text-primary",style:{color:"rgb(var(--c-primary))"}}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-800 dark:text-slate-100 mt-3",children:t("privacyPolicyTitle")})]}),e.jsxs("div",{className:"prose prose-lg max-w-none prose-indigo dark:prose-invert text-slate-600 dark:text-slate-300",children:[e.jsx("p",{className:"lead text-xl",children:t("privacyIntro")}),m.map(l=>e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-200",children:l.title}),e.jsx("p",{children:l.content})]},l.title))]})]})]})},Ve=()=>{const[r,t]=n.useState("role_selection"),[m,l]=n.useState(null),{language:a}=D(),{isLoggedIn:c,currentUser:s,loading:y}=_e(),[i,o]=n.useState([]),[u,d]=n.useState(!0),[k,h]=n.useState("dashboard"),[v,w]=n.useState(null),[S,N]=n.useState(null),[j,f]=n.useState(null);n.useEffect(()=>{(async()=>{try{const T=await Ee();o(T)}catch(T){console.error("Failed to load curriculum:",T)}finally{d(!1)}})()},[]),n.useEffect(()=>{const x=document.documentElement;r==="student_flow"&&v&&parseInt(v.level.split(" ")[1])<=5?x.classList.add("theme-young"):x.classList.remove("theme-young")},[v,r]);const F=n.useCallback(x=>{t(`${x}_flow`),h("dashboard"),w(null),N(null),f(null),l(null)},[]),P=n.useCallback(()=>{r==="student_flow"&&h("dashboard"),t("role_selection"),w(null),N(null),f(null),l(null)},[r]),p=n.useCallback(()=>{h("dashboard"),w(null),N(null),f(null)},[]),R=n.useCallback(x=>{l(x)},[]),L=n.useCallback(x=>{w(x),N(null),f(null)},[]),A=n.useCallback(x=>{N(x),f(null)},[]),b=n.useCallback(x=>{f(x)},[]),g=n.useCallback(()=>{l(null)},[]),C=n.useCallback(()=>{N(null),f(null)},[]),B=n.useCallback(()=>{f(null)},[]),I=n.useCallback(()=>{if(s){const x=i.find(T=>T.level===s.grade);x&&w(x),h("browse")}},[s,i]),M=n.useCallback(()=>{h("wellbeing")},[]),Z=()=>v?S?j?s?e.jsx(U,{grade:v,subject:S,chapter:j,student:s,language:a,onBackToChapters:B,onBackToSubjects:C,onChapterSelect:b}):null:e.jsx(z,{grade:v,selectedSubject:S,onSubjectSelect:A,onChapterSelect:b,onBack:C}):e.jsx(z,{grade:v,onSubjectSelect:A,onChapterSelect:b,onBack:p}):e.jsx(Fe,{grades:i,onSelect:L,onBack:p}),ee=()=>{if(y)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx($,{})});if(!c||!s)return e.jsx(Ae,{grades:i,onBack:()=>t("role_selection")});switch(k){case"dashboard":return e.jsx(W,{onStartMission:()=>h("path"),onBrowse:I,onStartWellbeing:M});case"path":return e.jsx(ge,{onBack:p});case"browse":return Z();case"wellbeing":{if(!s)return null;const x={title:"The Great Transformation: Navigating Your Journey from Teen to Adult"},T={name:"Personal Growth & Well-being",icon:"SparklesIcon",chapters:[x]},ae={level:s.grade,description:"Special Module",subjects:[T]};return e.jsx(U,{grade:ae,subject:T,chapter:x,student:s,language:a,onBackToChapters:p,onBackToSubjects:p,onChapterSelect:()=>{}})}default:return e.jsx(W,{onStartMission:()=>h("path"),onBrowse:I,onStartWellbeing:M})}},te=()=>{if(u)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-200px)]",children:[e.jsx($,{}),e.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-300 text-lg",children:"Loading curriculum..."})]});if(r==="privacy_policy")return e.jsx(qe,{onBack:()=>t("role_selection")});if(r==="faq")return e.jsx(Ie,{onBack:()=>t("role_selection")});switch(r){case"role_selection":return e.jsx(O,{onSelectRole:F,onShowPrivacyPolicy:()=>t("privacy_policy"),onShowFaq:()=>t("faq")});case"student_flow":return ee();case"teacher_flow":if(!m){const T=c&&s?[s]:H;return e.jsx($e,{students:T,onSelectStudent:R,onBack:()=>t("role_selection")})}return e.jsx(K,{userRole:"teacher",student:m,language:a,onBack:g});case"parent_flow":const x=c&&s?s:H[0];return m?e.jsx(K,{userRole:"parent",student:m,language:a,onBack:g}):e.jsx(Le,{child:x,onSelectStudent:R,onBack:()=>t("role_selection")});default:return e.jsx(O,{onSelectRole:F,onShowPrivacyPolicy:()=>t("privacy_policy"),onShowFaq:()=>t("faq")})}};return e.jsxs(e.Fragment,{children:[e.jsx(n.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(De,{onGoHome:P,showHomeButton:r!=="role_selection"})}),e.jsx("main",{className:"container mx-auto p-4 md:p-8",children:e.jsx(n.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:te()})})]})},X=document.getElementById("root");if(!X)throw new Error("Could not find root element to mount to");const Qe=pe.createRoot(X);Qe.render(e.jsx(be.StrictMode,{children:e.jsx(Pe,{children:e.jsx(Re,{children:e.jsx(Me,{children:e.jsx(Ve,{})})})})}));
