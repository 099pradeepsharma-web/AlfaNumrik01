import{r as c,j as e,S as u,G as f,ad as C,b as S}from"./vendor_react-DXiryTHP.js";import{u as R}from"./chapterview-B02STcsL.js";import"./vendor-D07iqKQo.js";import"./videosimulationplayer-iOOravJX.js";import"./loadingspinner-DNzNT9Ti.js";const T=({questions:d,onBack:m,chapterTitle:x,onFinish:b})=>{const[t,h]=c.useState(0),[a,k]=c.useState({}),[p,j]=c.useState(!1),{t:r}=R(),w=s=>{p||k({...a,[t]:s})},y=()=>{t<d.length-1&&h(t+1)},N=()=>{t>0&&h(t-1)},g=()=>d.reduce((s,n,l)=>a[l]===n.correctAnswer?s+1:s,0),v=()=>{b?b({score:g(),answers:a}):j(!0)},A=()=>{const s=g(),n=Math.round(s/d.length*100);return e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg animate-fade-in text-center border border-slate-200 dark:border-slate-700",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100",children:r("quizResults")}),e.jsxs("p",{className:"text-lg text-slate-500 dark:text-slate-400 mt-1",children:[r("chapter"),": ",x]}),e.jsxs("div",{className:`mt-8 text-6xl font-bold ${n>=70?"text-green-500":"text-orange-500"}`,children:[n,"%"]}),e.jsx("p",{className:"text-xl text-slate-600 dark:text-slate-300 mt-2",children:r("quizScoreSummary",{score:s,total:d.length})}),e.jsxs("div",{className:"mt-10 text-left",children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-700 dark:text-slate-200 mb-4",children:r("reviewAnswers")}),d.map((l,o)=>e.jsxs("div",{className:"mb-6 p-4 border border-slate-200 dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[e.jsxs("p",{className:"font-semibold text-slate-800 dark:text-slate-100",children:[o+1,". ",l.question]}),e.jsxs("p",{className:"text-sm text-primary dark:text-indigo-400 font-medium my-1",style:{color:"rgb(var(--c-primary))"},children:[r("concept"),": ",l.conceptTitle]}),e.jsxs("p",{className:`mt-2 flex items-center ${a[o]===l.correctAnswer?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[a[o]===l.correctAnswer?e.jsx(f,{"aria-hidden":"true",className:"h-5 w-5 mr-2"}):e.jsx(C,{"aria-hidden":"true",className:"h-5 w-5 mr-2"}),r("yourAnswer"),": ",a[o]||r("notAnswered")]}),a[o]!==l.correctAnswer&&e.jsxs("p",{className:"mt-1 flex items-center text-green-700 dark:text-green-400",children:[e.jsx(f,{"aria-hidden":"true",className:"h-5 w-5 mr-2"}),r("correctAnswerLabel"),": ",l.correctAnswer]}),e.jsxs("div",{className:"mt-2 p-3 bg-primary-light dark:bg-slate-900/50 rounded-md text-primary-dark/80 dark:text-slate-300 flex items-start",style:{backgroundColor:"rgb(var(--c-primary-light))",color:"rgba(var(--c-primary-dark), 0.9)"},children:[e.jsx(S,{className:"h-5 w-5 mr-2 flex-shrink-0 mt-1"}),e.jsxs("span",{children:[e.jsxs("span",{className:"font-semibold",children:[r("explanation"),":"]})," ",l.explanation]})]})]},o))]}),e.jsxs("button",{onClick:m,className:"mt-8 flex items-center justify-center mx-auto px-6 py-3 text-white font-bold rounded-lg btn-primary-gradient",children:[e.jsx(u,{className:"h-5 w-5 mr-2"}),r("backToLesson")]})]})};if(p)return A();const i=d[t];return e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("button",{onClick:m,className:"flex items-center text-primary hover:text-primary-dark font-semibold transition mb-6",style:{color:"rgb(var(--c-primary))"},children:[e.jsx(u,{className:"h-5 w-5 mr-2"}),r("backToLesson")]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-slate-200 dark:border-slate-700 pb-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:r("adaptiveQuiz")}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:x})]}),e.jsxs("div",{className:"text-lg font-semibold text-slate-600 dark:text-slate-300",children:[r("question")," ",t+1," ",e.jsxs("span",{className:"text-slate-400 dark:text-slate-500",children:["/ ",d.length]})]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-primary dark:text-indigo-400 font-medium mb-2",style:{color:"rgb(var(--c-primary))"},children:[r("testingConcept"),": ",i.conceptTitle]}),e.jsx("p",{className:"text-xl font-semibold text-slate-700 dark:text-slate-200 mb-6",children:i.question}),e.jsx("div",{className:"space-y-4",children:i.options.map((s,n)=>e.jsxs("button",{onClick:()=>w(s),"aria-pressed":a[t]===s,className:`w-full text-left p-4 rounded-lg border-2 transition-all duration-200 flex items-center text-slate-800 dark:text-slate-200
                                ${a[t]===s?"bg-primary-light/50 dark:bg-slate-900/50 border-primary ring-2 ring-primary/50":"bg-white dark:bg-slate-800/50 border-slate-300 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700 hover:border-primary"}
                            `,style:{borderColor:a[t]===s?"rgb(var(--c-primary))":""},children:[e.jsx("span",{className:`h-6 w-6 rounded-full border-2 ${a[t]===s?"border-primary bg-primary":"border-slate-400 dark:border-slate-500"} mr-4 flex-shrink-0`,style:{borderColor:a[t]===s?"rgb(var(--c-primary))":"",backgroundColor:a[t]===s?"rgb(var(--c-primary))":"transparent"}}),s]},n))})]}),e.jsxs("div",{className:"flex justify-between items-center mt-8 pt-6 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("button",{onClick:N,disabled:t===0,className:"px-6 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200 font-semibold rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition",children:r("previous")}),t<d.length-1?e.jsx("button",{onClick:y,disabled:!a[t],className:"px-6 py-2 text-white font-semibold rounded-lg btn-primary-gradient disabled:opacity-70 disabled:cursor-not-allowed",children:r("next")}):e.jsx("button",{onClick:v,disabled:!a[t],className:"px-6 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white font-semibold rounded-lg shadow-md hover:shadow-lg hover:-translate-y-0.5 transform transition disabled:opacity-70 disabled:cursor-not-allowed",children:r("finishQuiz")})]})]})]})};export{T as default};
