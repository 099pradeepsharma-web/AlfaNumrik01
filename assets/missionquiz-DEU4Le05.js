const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/fittoavatar-BE-ozDqT.js","assets/vendor_react-DXiryTHP.js","assets/vendor-D07iqKQo.js"])))=>i.map(i=>d[i]);
import{_,u as T,l as F}from"./chapterview-B02STcsL.js";import{R as I,r as m,j as e,G as q,ad as E,b as M,ae as O}from"./vendor_react-DXiryTHP.js";import{u as Q}from"./conceptcard-CDDsxe1s.js";const z=I.lazy(()=>_(()=>import("./fittoavatar-BE-ozDqT.js"),__vite__mapDeps([0,1,2]))),f=s=>"conceptTitle"in s,j=s=>"skill"in s&&!("scenario"in s),h=s=>"scenario"in s,H=({tasks:s,adaptiveAction:y,onFinish:k})=>{const{t:r,tCurriculum:b}=T(),{currentUser:g}=Q(),[d,N]=m.useState(0),[l,p]=m.useState(null),[u,v]=m.useState(0),[w,C]=m.useState(!1),a=s[d],i=(t=>f(t)||j(t)?t.correctAnswer:h(t)?t.bestResponse:"")(a),A=t=>{l||(p(t),t===i&&v(n=>n+1))},R=async()=>{if(g)if(d===s.length-1){const t=Math.round(u/s.length*100),{type:n,details:c}=y,$={subject:c.subject?b(c.subject):r(`missionType_${n}`),chapter:c.chapter?b(c.chapter):r("todaysMission"),score:t,completedDate:new Date().toISOString(),type:"quiz",context:c.reasoning};await F(g.id,$),C(!0)}else N(t=>t+1),p(null)},S=t=>l?t===i?"bg-green-100 dark:bg-green-900/50 border-green-500 ring-2 ring-green-300":t===l&&t!==i?"bg-red-100 dark:bg-red-900/50 border-red-500 ring-2 ring-red-300":"bg-slate-100 dark:bg-slate-700 border-slate-300 dark:border-slate-500 opacity-70 cursor-not-allowed":"bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-600 hover:border-primary";if(w){const n=Math.round(u/s.length*100)>=80;return e.jsxs("div",{className:"text-center animate-fade-in flex flex-col items-center",children:[n&&e.jsx("div",{className:"mb-4",children:e.jsx(z,{state:"celebrating",size:100})}),e.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100",children:r("missionComplete")}),e.jsx("p",{className:"text-lg text-slate-500 dark:text-slate-400 mt-2",children:r("greatWork")}),e.jsxs("div",{className:"text-5xl font-bold text-primary my-4",style:{color:"rgb(var(--c-primary))"},children:[u," / ",s.length]}),e.jsx("button",{onClick:k,className:"mt-4 flex items-center justify-center mx-auto px-6 py-3 bg-primary text-white font-bold rounded-lg shadow-md hover:bg-primary-dark transition",children:r("backToDashboard")})]})}let o=r("todaysTask"),x="";return f(a)?(o=r("academicQuestion"),x=`${r("testingConcept")}: ${b(a.conceptTitle)}`):j(a)?(o=r("iqChallenge"),x=`${r("skill")}: ${a.skill}`):h(a)&&(o=r("eqChallenge"),x=`${r("skill")}: ${a.skill}`),e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center border-b dark:border-slate-600 pb-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:o}),e.jsx("p",{className:"text-primary font-medium",style:{color:"rgb(var(--c-primary))"},children:x})]}),e.jsxs("div",{className:"text-lg font-semibold text-slate-600 dark:text-slate-300",children:[r("question")," ",d+1," ",e.jsxs("span",{className:"text-slate-400 dark:text-slate-500",children:["/ ",s.length]})]})]}),e.jsxs("div",{children:[h(a)&&e.jsxs("p",{className:"text-slate-500 dark:text-slate-400 italic mb-4",children:['"',a.scenario,'"']}),e.jsx("p",{className:"text-xl font-semibold text-slate-700 dark:text-slate-200 mb-6",children:a.question}),e.jsx("div",{className:"space-y-4",children:a.options.map((t,n)=>e.jsxs("button",{onClick:()=>A(t),disabled:!!l,"aria-pressed":l===t,className:`w-full text-left p-4 rounded-lg border-2 transition-all duration-200 flex items-center text-slate-800 dark:text-slate-200 ${S(t)}`,children:[e.jsx("span",{className:`h-6 w-6 rounded-full border-2 ${l===t?"border-primary bg-primary":"border-slate-400 dark:border-slate-500"} mr-4 flex-shrink-0`,style:{borderColor:l===t?"rgb(var(--c-primary))":"",backgroundColor:l===t?"rgb(var(--c-primary))":""}}),t]},n))})]}),l&&e.jsxs("div",{className:"mt-6 animate-fade-in",children:[l===i?e.jsxs("div",{className:"flex items-center text-green-600 dark:text-green-400 font-bold text-lg",children:[e.jsx(q,{"aria-hidden":"true",className:"h-6 w-6 mr-2"})," ",r("correct")]}):e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center text-red-600 dark:text-red-400 font-bold text-lg",children:[e.jsx(E,{"aria-hidden":"true",className:"h-6 w-6 mr-2"})," ",r("incorrect")]}),e.jsxs("p",{className:"text-slate-600 dark:text-slate-300",children:[r(h(a)?"bestResponse":"correctAnswerLabel"),": ",i]})]}),e.jsxs("div",{className:"mt-3 p-3 bg-primary-light dark:bg-slate-700/50 rounded-md text-primary-dark/80 dark:text-slate-300 flex items-start",children:[e.jsx(M,{"aria-hidden":"true",className:"h-5 w-5 mr-2 flex-shrink-0 mt-0.5 text-primary",style:{color:"rgb(var(--c-primary))"}}),e.jsxs("span",{children:[e.jsxs("span",{className:"font-semibold",children:[r("explanation"),":"]})," ",a.explanation]})]}),e.jsx("div",{className:"text-right mt-6",children:e.jsxs("button",{onClick:R,className:"px-8 py-3 bg-primary text-white font-semibold rounded-lg shadow hover:bg-primary-dark transition flex items-center ml-auto",style:{backgroundColor:"rgb(var(--c-primary))"},children:[d===s.length-1?r("finishPractice"):r("nextQuestion"),e.jsx(O,{className:"h-5 w-5 ml-2"})]})})]})]})};export{H as M};
