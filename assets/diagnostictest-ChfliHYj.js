const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/quiz-DnL6uxM-.js","assets/vendor_react-DXiryTHP.js","assets/vendor-D07iqKQo.js","assets/chapterview-B02STcsL.js","assets/videosimulationplayer-iOOravJX.js","assets/loadingspinner-DNzNT9Ti.js"])))=>i.map(i=>d[i]);
import{u as R,k as v,_ as C}from"./chapterview-B02STcsL.js";import{r as a,j as e,b as S,S as y,R as _}from"./vendor_react-DXiryTHP.js";import E from"./loadingspinner-DNzNT9Ti.js";import"./vendor-D07iqKQo.js";import"./videosimulationplayer-iOOravJX.js";const L=_.lazy(()=>C(()=>import("./quiz-DnL6uxM-.js"),__vite__mapDeps([0,1,2,3,4,5]))),q=({grade:d,subject:r,language:c,onBack:l})=>{const[s,p]=a.useState(null),[f,m]=a.useState(!0),[x,h]=a.useState(null),[b,j]=a.useState(!1),[g,N]=a.useState(0),{t,tCurriculum:o}=R();a.useEffect(()=>{(async()=>{try{m(!0),h(null);const i=await v(d.level,r.name,c);p(i)}catch(i){h(i.message||t("testGenerationError"))}finally{m(!1)}})()},[d.level,r.name,c,t]);const k=n=>{N(n.score),j(!0)},T=()=>{const n=g/((s==null?void 0:s.length)||1)*100,i=o(r.name),u=o(r.chapters[0].title),w=o(r.chapters[Math.floor(r.chapters.length/2)].title);return n>=80?t("diagnosticResultHigh",{subject:i,chapter:w}):n>=50?t("diagnosticResultMid",{chapter:u}):t("diagnosticResultLow",{chapter:u})};return f?e.jsxs("div",{className:"flex flex-col items-center justify-center h-96",children:[e.jsx(E,{}),e.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-300 text-lg",children:t("preparingDiagnosticTest")})]}):x?e.jsxs("div",{className:"text-center p-8 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[e.jsx("h3",{className:"text-xl font-bold text-red-700 dark:text-red-400",children:t("couldNotCreateTest")}),e.jsx("p",{className:"text-red-600 dark:text-red-400 mt-2",children:x}),e.jsx("button",{onClick:l,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition",children:t("backToSubjects")})]}):b?e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg animate-fade-in text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100",children:t("testComplete")}),e.jsx("p",{className:"text-lg text-slate-500 dark:text-slate-400 mt-1",children:t("youScored",{score:g,total:s==null?void 0:s.length})}),e.jsxs("div",{role:"status",className:"mt-8 p-6 bg-indigo-50 dark:bg-indigo-900/40 border-l-4 border-indigo-400 dark:border-indigo-500 rounded-r-lg text-left",children:[e.jsxs("h3",{className:"font-semibold text-indigo-800 dark:text-indigo-200 flex items-center mb-2 text-xl",children:[e.jsx(S,{className:"h-6 w-6 mr-2"}),t("ourRecommendation")]}),e.jsx("p",{className:"text-indigo-700 dark:text-indigo-300 text-lg",children:T()})]}),e.jsxs("button",{onClick:l,className:"mt-8 flex items-center justify-center mx-auto px-6 py-3 bg-indigo-600 text-white font-bold rounded-lg shadow-md hover:bg-indigo-700 transition",children:[e.jsx(y,{className:"h-5 w-5 mr-2"}),t("backToChapters")]})]}):s?e.jsx(L,{questions:s,onBack:l,chapterTitle:`${t("diagnosticTestFor")}: ${o(r.name)}`,onFinish:k}):null};export{q as default};
